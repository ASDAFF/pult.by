!function(t,e,n,o){"use strict";function s(){this.processing=!1,this.id=!1,this.control=null,this.hExpandUploader=null,this.init()}e.Recall||(s.prototype={init:function(){t(n).on("click",".ajax-recall",function(e){e.preventDefault();var n={form_popup:t(this).data("form-popup")};t.fancybox({type:"ajax",autoSize:!0,width:500,maxWidth:500,minWidth:230,cache:!1,ajax:{dataType:"html",headers:{"X-fancyBox":!0},data:n},helpers:{title:{type:"inside",position:"top"}},title:t(this).data("form-title"),href:t(this).data("form-action"),openEffect:"fade",closeEffect:"fade",afterShow:function(){BX.UserConsent.loadFromForms()}})})},submit:function(t,e){this.id=t,"Y"===e?this.userConsent():this.ajax()},userConsent:function(){this.control&&BX.removeCustomEvent(this.control,BX.UserConsent.events.save,this.hExpandUploader),this.control=BX.UserConsent.load(BX(this.id)),this.hExpandUploader=BX.proxy(this.ajax,this),BX.addCustomEvent(this.control,BX.UserConsent.events.save,this.hExpandUploader),BX.onCustomEvent("un-recall-send",[])},ajax:function(){var e=new Loader,n=t("#"+this.id),o=n.is("form")?n:n.find("form");this.isProcessing()||(this.control&&BX.removeCustomEvent(this.control,BX.UserConsent.events.save,this.hExpandUploader),this.setProcessing(!0),e.add(n),t.ajax({type:o.attr("method"),url:o.attr("action"),data:o.serialize()}).done(t.proxy(function(t){this.setProcessing(!1),e.end(),n.html(t)},this)).fail(function(){e.end(),console.log("error")}))},isProcessing:function(){return this.processing===!0},setProcessing:function(t){this.processing=t===!0}},e.Recall=new s)}(window.jQuery,window,document);